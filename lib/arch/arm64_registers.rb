module Crabstone
  module ARM64
    REG_LOOKUP = {
      "INVALID"=> 0,
      "NZCV"   => 1,
      "WSP"    => 2,
      "WZR"    => 3,
      "SP"     => 4,
      "XZR"    => 5,
      "B0"     => 6,
      "B1"     => 7,
      "B2"     => 8,
      "B3"     => 9,
      "B4"     => 10,
      "B5"     => 11,
      "B6"     => 12,
      "B7"     => 13,
      "B8"     => 14,
      "B9"     => 15,
      "B10"    => 16,
      "B11"    => 17,
      "B12"    => 18,
      "B13"    => 19,
      "B14"    => 20,
      "B15"    => 21,
      "B16"    => 22,
      "B17"    => 23,
      "B18"    => 24,
      "B19"    => 25,
      "B20"    => 26,
      "B21"    => 27,
      "B22"    => 28,
      "B23"    => 29,
      "B24"    => 30,
      "B25"    => 31,
      "B26"    => 32,
      "B27"    => 33,
      "B28"    => 34,
      "B29"    => 35,
      "B30"    => 36,
      "B31"    => 37,
      "D0"     => 38,
      "D1"     => 39,
      "D2"     => 40,
      "D3"     => 41,
      "D4"     => 42,
      "D5"     => 43,
      "D6"     => 44,
      "D7"     => 45,
      "D8"     => 46,
      "D9"     => 47,
      "D10"    => 48,
      "D11"    => 49,
      "D12"    => 50,
      "D13"    => 51,
      "D14"    => 52,
      "D15"    => 53,
      "D16"    => 54,
      "D17"    => 55,
      "D18"    => 56,
      "D19"    => 57,
      "D20"    => 58,
      "D21"    => 59,
      "D22"    => 60,
      "D23"    => 61,
      "D24"    => 62,
      "D25"    => 63,
      "D26"    => 64,
      "D27"    => 65,
      "D28"    => 66,
      "D29"    => 67,
      "D30"    => 68,
      "D31"    => 69,
      "H0"     => 70,
      "H1"     => 71,
      "H2"     => 72,
      "H3"     => 73,
      "H4"     => 74,
      "H5"     => 75,
      "H6"     => 76,
      "H7"     => 77,
      "H8"     => 78,
      "H9"     => 79,
      "H10"    => 80,
      "H11"    => 81,
      "H12"    => 82,
      "H13"    => 83,
      "H14"    => 84,
      "H15"    => 85,
      "H16"    => 86,
      "H17"    => 87,
      "H18"    => 88,
      "H19"    => 89,
      "H20"    => 90,
      "H21"    => 91,
      "H22"    => 92,
      "H23"    => 93,
      "H24"    => 94,
      "H25"    => 95,
      "H26"    => 96,
      "H27"    => 97,
      "H28"    => 98,
      "H29"    => 99,
      "H30"    => 100,
      "H31"    => 101,
      "Q0"     => 102,
      "Q1"     => 103,
      "Q2"     => 104,
      "Q3"     => 105,
      "Q4"     => 106,
      "Q5"     => 107,
      "Q6"     => 108,
      "Q7"     => 109,
      "Q8"     => 110,
      "Q9"     => 111,
      "Q10"    => 112,
      "Q11"    => 113,
      "Q12"    => 114,
      "Q13"    => 115,
      "Q14"    => 116,
      "Q15"    => 117,
      "Q16"    => 118,
      "Q17"    => 119,
      "Q18"    => 120,
      "Q19"    => 121,
      "Q20"    => 122,
      "Q21"    => 123,
      "Q22"    => 124,
      "Q23"    => 125,
      "Q24"    => 126,
      "Q25"    => 127,
      "Q26"    => 128,
      "Q27"    => 129,
      "Q28"    => 130,
      "Q29"    => 131,
      "Q30"    => 132,
      "Q31"    => 133,
      "S0"     => 134,
      "S1"     => 135,
      "S2"     => 136,
      "S3"     => 137,
      "S4"     => 138,
      "S5"     => 139,
      "S6"     => 140,
      "S7"     => 141,
      "S8"     => 142,
      "S9"     => 143,
      "S10"    => 144,
      "S11"    => 145,
      "S12"    => 146,
      "S13"    => 147,
      "S14"    => 148,
      "S15"    => 149,
      "S16"    => 150,
      "S17"    => 151,
      "S18"    => 152,
      "S19"    => 153,
      "S20"    => 154,
      "S21"    => 155,
      "S22"    => 156,
      "S23"    => 157,
      "S24"    => 158,
      "S25"    => 159,
      "S26"    => 160,
      "S27"    => 161,
      "S28"    => 162,
      "S29"    => 163,
      "S30"    => 164,
      "S31"    => 165,
      "W0"     => 166,
      "W1"     => 167,
      "W2"     => 168,
      "W3"     => 169,
      "W4"     => 170,
      "W5"     => 171,
      "W6"     => 172,
      "W7"     => 173,
      "W8"     => 174,
      "W9"     => 175,
      "W10"    => 176,
      "W11"    => 177,
      "W12"    => 178,
      "W13"    => 179,
      "W14"    => 180,
      "W15"    => 181,
      "W16"    => 182,
      "W17"    => 183,
      "W18"    => 184,
      "W19"    => 185,
      "W20"    => 186,
      "W21"    => 187,
      "W22"    => 188,
      "W23"    => 189,
      "W24"    => 190,
      "W25"    => 191,
      "W26"    => 192,
      "W27"    => 193,
      "W28"    => 194,
      "W29"    => 195,
      "W30"    => 196,
      "X0"     => 197,
      "X1"     => 198,
      "X2"     => 199,
      "X3"     => 200,
      "X4"     => 201,
      "X5"     => 202,
      "X6"     => 203,
      "X7"     => 204,
      "X8"     => 205,
      "X9"     => 206,
      "X10"    => 207,
      "X11"    => 208,
      "X12"    => 209,
      "X13"    => 210,
      "X14"    => 211,
      "X15"    => 212,
      "X16"    => 213,
      "X17"    => 214,
      "X18"    => 215,
      "X19"    => 216,
      "X20"    => 217,
      "X21"    => 218,
      "X22"    => 219,
      "X23"    => 220,
      "X24"    => 221,
      "X25"    => 222,
      "X26"    => 223,
      "X27"    => 224,
      "X28"    => 225,
      "X29"    => 226,
      "X30"    => 227
    }

    ID_LOOKUP = REG_LOOKUP.invert
    SYM_LOOKUP = Hash[REG_LOOKUP.map {|k,v| [k.downcase.to_sym,v]}]

    def self.register reg
      return reg if ID_LOOKUP[reg]
      return SYM_LOOKUP[reg] if SYM_LOOKUP[reg]
      if reg.respond_to? :upcase
        return REG_LOOKUP[reg.upcase] || REG_LOOKUP['INVALID']
      end
      REG_LOOKUP['INVALID']
    end

  end
end
